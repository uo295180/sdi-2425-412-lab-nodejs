<div id="widget-agregar" >
  <div id = "error-container"></div>
  <div class="form-group">
    <label class="control-label col-sm-2" for="title-add">Nombre:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" name="title-add"
             placeholder="Título de la canción" id="title-add" />
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-sm-2" for="kind-add">Género:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" name="kind-add"
             placeholder="Género de la canción" id="kind-add" />
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-sm-2" for="price-add">Precio (€):</label>
    <div class="col-sm-10">
      <input type="number" step="0.01" class="form-control" name="price-add"
             placeholder="2.50" id="price-add" />
    </div>
  </div>
  <div class="col-sm-offset-2 col-sm-10">
    <button type="button" class="btn btn-primary" id="boton-add"
            onclick="widgetAddSong()">Nueva canción</button>
  </div>
</div>
<script>
  function widgetAddSong( ) {
    $.ajax({
      url: URLbase + "/songs",
      type: "POST",
      data: {
        title: $("#title-add").val(),
        kind: $("#kind-add").val(),
        price: $("#price-add").val()
      },
      dataType: 'json',
      headers: {"token": token},
      success: function (response) {
        $("#main-container").load("widget-songs.html");
      },
      error: function (error) {
        $("#error-container").empty();
        $("#error-container").append("<div id='errors' class='alert alert-danger'><ol id='error-list'></ol></div>")
        if (error.responseJSON && error.responseJSON.error) {
          error.responseJSON.error.forEach(err => {
            if(err.msg) {
              $("#error-list").append(`<li>${err.msg}</li>`);
            }
            else {
              $("#error-list").append(`<li>${err}</li>`);
            }
          });
        } else {
          $("#error-list").append("<li>Error desconocido. Inténtalo de nuevo.</li>");
        }
        //$("#main-container").load("widget-login.html");
      }
    });
  }
</script>